var O2 = require('o2');
var CONST = require('../data/consts.js');
var Effect = require('../Effects.js');
var Book = require('./Abstract/Book.js');
var u = require('../Utils.js');
var oLoot = require('mwgame/data/loot.js');

/**
 * spellbook of scroll summoning
 * Permet d'invoquer un parchemin de sort dans l'inventaire.
 */
var BookMkScroll = O2.extendClass(Book, {
	cooldown: CONST.SPELL_DURATION_LEVEL[4],

	read: function(ctx) {
		var oCaster = ctx.caster;
		var oInstance = ctx.instance;
		var oLoot = {t: 'scrolls', i: null};
		oInstance.sendSignal('generateLoot', oLoot);
		if (oLoot.i) {
			var oPickup = {e: oCaster, i: [oLoot.i], f: false};
			oInstance.sendSignal('entityPickUpItem', oPickup);
		}
	}
});

module.exports = BookMkScroll;
